<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>Amateur</title>
  <!-- 使用拆分后的样式入口，内部 @import 旧 styles.css，确保兼容 -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body class="pink-theme">
  <!-- 设置弹窗 -->
  <div id="settingsPopup" class="settings-popup" style="display: none;">
    <div class="settings-popup-content">
      <div class="settings-popup-header">
        <h2>设置</h2>
        <span class="settings-popup-close" id="closeSettingsPopup">&times;</span>
      </div>
      <div class="settings-popup-body">
        <p>设置内容将在稍后添加...</p>
      </div>
    </div>
  </div>

  <!-- 下载弹窗 -->
  <div id="downloadModal" class="download-modal" style="z-index:9999;display:none;">
    <div>
      <h3>下载进度</h3>
      <div id="downloadProgressBar" style="height:20px;background:#eee;border-radius:8px;margin-bottom:10px;">
        <div id="downloadProgress" style="height:100%;width:0%;background:#55cc88;border-radius:8px;text-align:center;color:#fff;line-height:20px;">0%</div>
      </div>
      <div id="downloadLog" style="height:180px;overflow-y:auto;background:#f7f7f7;border:1px solid #ccc;padding:10px;font-size:13px;"></div>
      <button onclick="hideDownloadModal()">关闭</button>
    </div>
  </div>

  <style>
  .download-modal { position:fixed; left:0; top:0; width:100vw; height:100vh; background:rgba(0,0,0,.17); display:flex; align-items:center; justify-content:center; z-index:9999; }
  .download-modal > * { background:#fff; border-radius:12px; box-shadow:0 4px 16px #0001; min-width:330px; padding:24px 16px 16px 16px; }
  </style>

  <div class="container">
    <!-- 左侧导航栏 -->
    <aside class="sidebar">
      <div class="sidebar-top">
        <div class="logo">
          <img src="/static/images/logo.png" alt="Logo" />
        </div>
        <div class="app-info">
          <div class="app-name">Amateur</div>
          <div class="app-version">v1.2.0</div>
        </div>
      </div>

      <div class="sidebar-content">
        <div class="menu-item" data-page="home">
          <div class="menu-icon"><img src="/static/images/home.png" alt="home" /></div>
          <div class="menu-label">主页</div>
        </div>
        <div class="menu-item" data-page="tools">
          <div class="menu-icon"><img src="/static/images/tool.png" alt="tool" /></div>
          <div class="menu-label">功能</div>
        </div>
        <div class="menu-item" data-page="chat">
          <div class="menu-icon"><img src="/static/images/chat.png" alt="chat" /></div>
          <div class="menu-label">AI 对话</div>
        </div>
        <div class="menu-item" data-page="about">
          <div class="menu-icon"><img src="/static/images/about.png" alt="about" /></div>
          <div class="menu-label">关于</div>
        </div>
      </div>

      <div class="menu-button-container">
        <div class="theme-toggle-button" id="themeToggleButton">
          <div class="theme-icon">
            <img src="/static/images/setting.png" alt="主题切换" />
          </div>
        </div>
        <div class="menu-settings-button" id="menusettingsButton">
          <div class="menu-settings-icon">
            <img src="/static/images/setting.png" alt="设置" />
          </div>
        </div>
      </div>
    </aside>

    <!-- 右侧主要内容区 -->
    <main class="main-box">
      <div class="main-content"></div>
    </main>
  </div>

  <!-- socket.io -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
  <!-- 应用脚本入口：模块化加载 -->
  <script type="module" src="/static/js/app.js"></script>
  <!-- 为下载弹窗按钮提供全局关闭函数（便于 inline onclick 调用）-->
  <script type="module">
    import('/static/js/download/download-modal.js').then(m=>{
      window.hideDownloadModal = m.hideDownloadModal;
    });
  </script>
</body>
</html>